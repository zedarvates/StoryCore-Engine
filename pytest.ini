[pytest]
# Pytest Configuration for StoryCore-Engine Technical Debt Remediation

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = tests

# Minimum coverage thresholds (80% minimum as per requirements)
addopts = 
    --verbose
    --strict-markers
    --cov=src
    --cov=.
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-fail-under=80
    --tb=short
    --asyncio-mode=auto

# Markers for organizing tests
markers =
    unit: Unit tests for individual components
    property: Property-based tests using hypothesis
    integration: Integration tests for multiple components
    slow: Tests that take significant time to run
    security: Security-related tests
    asynctest: Asynchronous operation tests
    credential: Credential security tests
    documentation: Documentation translation tests
    refactoring: Module refactoring tests
    cicd: CI/CD pipeline tests
    monitoring: Monitoring and alerting tests
    compatibility: Backward compatibility tests
    performance: Performance baseline tests

# Coverage configuration
[coverage:run]
source = src,.
omit = 
    */tests/*
    */test_*
    */__pycache__/*
    */venv/*
    */.venv/*
    */node_modules/*
    */comfyui_portable/*
    */creative-studio-ui/*
    setup.py

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

[coverage:html]
directory = htmlcov

# Hypothesis configuration for property-based testing
[hypothesis]
# Run minimum 100 iterations per property test as per requirements
max_examples = 100
# Increase deadline for slower operations
deadline = 5000
# Print detailed output for failures
verbosity = verbose
# Database for example tracking
database = .hypothesis/examples
