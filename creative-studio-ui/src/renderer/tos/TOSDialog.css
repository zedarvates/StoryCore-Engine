/**
 * TOS Dialog Styles
 * 
 * Implements design system consistency with StoryCore's visual language.
 * Uses CSS custom properties from the main design system for colors,
 * typography, and spacing to ensure cohesive user experience.
 * 
 * Requirements: 6.1, 6.2, 6.3, 7.5
 */

/* ============================================================================
   Base Container - Full Viewport Overlay
   ============================================================================ */

/**
 * Full-viewport overlay container with flexbox centering
 * 
 * Features:
 * - Fixed positioning to cover entire viewport
 * - Flexbox centering for content card
 * - Semi-transparent dark overlay background
 * - High z-index to ensure dialog appears above all content
 * 
 * Requirements: 6.1
 */
.tos-dialog-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: rgba(0, 0, 0, 0.6);
  z-index: 9999;
  padding: 1rem;
}

/* ============================================================================
   Content Card
   ============================================================================ */

/**
 * Content card with design system styling
 * 
 * Features:
 * - White background with subtle border radius
 * - Elevated box shadow for depth
 * - Fixed dimensions: 600px width, 700px height
 * - Three-section layout with flex column
 * - Professional appearance with proper spacing
 * 
 * Requirements: 3.1, 3.2, 4.1, 4.2, 4.3, 4.5, 6.1, 6.2, 6.3
 */
.tos-dialog-content {
  background: hsl(0 0% 100%);
  border-radius: 8px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2), 0 8px 16px rgba(0, 0, 0, 0.15);
  padding: 2rem;
  width: 600px;
  height: 700px;
  display: flex;
  flex-direction: column;
  animation: dialogFadeIn 0.2s ease-out;
}

/* Fade-in animation for smooth appearance */
@keyframes dialogFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Responsive padding adjustments */
@media (max-width: 640px) {
  .tos-dialog-content {
    padding: 1.5rem;
    width: 100%;
    max-width: 600px;
  }
}

/* ============================================================================
   Typography Styles from Design System
   ============================================================================ */

/**
 * Title heading with design system typography
 * 
 * Features:
 * - Large, bold heading matching design system
 * - Proper spacing and color from design tokens
 * - Semantic heading hierarchy
 * - Typography: 24px font size, 600 weight
 * 
 * Requirements: 3.1, 4.1, 6.2
 */
#tos-title {
  font-size: 24px;
  font-weight: 600;
  line-height: 1.2;
  margin: 0;
  color: hsl(222.2 84% 4.9%);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  flex-shrink: 0;
  padding-bottom: 1.25rem;
  border-bottom: 2px solid hsl(214.3 31.8% 91.4%);
}

/* ============================================================================
   Scrollable Content Area
   ============================================================================ */

/**
 * Scrollable container for license text
 * 
 * Features:
 * - Fixed max-height with vertical scrolling
 * - Custom scrollbar styling for dark theme
 * - Proper padding and spacing
 * - Flex-grow to fill available space
 * - StoryCore-Engine brand dark background
 * 
 * Requirements: 1.1, 1.3, 1.4, 3.2, 4.2, 6.4
 */
.tos-scrollable-content {
  max-height: 450px;
  overflow-y: auto;
  padding: 1.5rem;
  margin: 1.25rem 0;
  flex: 1;
  background-color: hsl(220 13% 13%);
  border-radius: 6px;
  border: 1px solid hsl(214.3 31.8% 91.4%);
}

/**
 * Custom scrollbar styling for dark theme
 * 
 * Features:
 * - Slim scrollbar width
 * - Dark theme colors
 * - Smooth hover transitions
 * 
 * Requirements: 1.4
 */
.tos-scrollable-content::-webkit-scrollbar {
  width: 8px;
}

.tos-scrollable-content::-webkit-scrollbar-track {
  background: hsl(220 13% 18%);
  border-radius: 4px;
}

.tos-scrollable-content::-webkit-scrollbar-thumb {
  background: hsl(215 20.2% 65.1%);
  border-radius: 4px;
  transition: background 0.2s ease;
}

.tos-scrollable-content::-webkit-scrollbar-thumb:hover {
  background: hsl(215 16.3% 46.9%);
}

/* Firefox scrollbar styling */
.tos-scrollable-content {
  scrollbar-width: thin;
  scrollbar-color: hsl(215 20.2% 65.1%) hsl(220 13% 18%);
}

/**
 * License text styling
 * 
 * Features:
 * - Monospace font for legal text readability
 * - Proper line height and spacing
 * - Light text on dark background
 * - Preserves whitespace formatting
 * 
 * Requirements: 6.4
 */
.tos-license-text {
  font-family: 'Courier New', Courier, monospace;
  font-size: 14px;
  line-height: 1.6;
  color: hsl(210 40% 98%);
  margin: 0;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/**
 * Message text with design system body styles
 * 
 * Features:
 * - Readable font size and line height
 * - Proper text color from design tokens
 * - Adequate spacing for readability
 * 
 * Requirements: 6.2
 */
.tos-dialog-message {
  font-size: 0.875rem;
  line-height: 1.6;
  color: hsl(215.4 16.3% 46.9%);
  margin: 0 0 1.5rem 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
}

.tos-dialog-message p {
  margin: 0;
}

/* ============================================================================
   Acceptance Checkbox Section
   ============================================================================ */

/**
 * Acceptance section container
 * 
 * Features:
 * - Positioned between scrollable content and action buttons
 * - Proper padding and spacing
 * - Border separator for visual hierarchy
 * - Flex layout for checkbox and label alignment
 * 
 * Requirements: 2.1, 2.2, 3.2, 3.4, 4.2
 */
.tos-acceptance-section {
  padding: 1.25rem 0;
  margin: 0;
  flex-shrink: 0;
  border-top: 2px solid hsl(214.3 31.8% 91.4%);
  border-bottom: 2px solid hsl(214.3 31.8% 91.4%);
}

/**
 * Error message styling
 * 
 * Features:
 * - Red background with white text for high visibility
 * - Proper padding and border radius
 * - Margin below for spacing from checkbox
 * - Alert role for accessibility
 * 
 * Requirements: Error Handling
 */
.tos-error-message {
  background-color: hsl(0 84.2% 60.2%);
  color: hsl(0 0% 100%);
  padding: 0.75rem 1rem;
  border-radius: 4px;
  margin-bottom: 1rem;
  font-size: 14px;
  line-height: 1.5;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  font-weight: 500;
}

/**
 * Checkbox label container
 * 
 * Features:
 * - Flex layout for checkbox and text alignment
 * - Proper gap spacing between checkbox and label text
 * - Cursor pointer for better UX
 * - Centered alignment
 * 
 * Requirements: 2.2, 3.4
 */
.tos-checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.625rem;
  cursor: pointer;
  user-select: none;
}

/**
 * Checkbox input styling
 * 
 * Features:
 * - Consistent size (18px)
 * - Cursor pointer for better UX
 * - Flex-shrink to prevent squashing
 * - Accessible focus states
 * 
 * Requirements: 2.1, 2.2
 */
.tos-checkbox {
  width: 18px;
  height: 18px;
  cursor: pointer;
  flex-shrink: 0;
  accent-color: hsl(222.2 47.4% 11.2%);
}

.tos-checkbox:focus-visible {
  outline: 2px solid hsl(222.2 84% 4.9%);
  outline-offset: 2px;
}

/**
 * Checkbox label text styling
 * 
 * Features:
 * - Readable font size (14px)
 * - Proper line height
 * - Design system color
 * - Font family matching design system
 * 
 * Requirements: 2.2, 3.4, 4.1
 */
.tos-checkbox-text {
  font-size: 14px;
  line-height: 1.5;
  color: hsl(222.2 47.4% 11.2%);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
}

/* ============================================================================
   Action Buttons Container
   ============================================================================ */

/**
 * Flexbox container for action buttons
 * 
 * Features:
 * - Horizontal layout with gap spacing
 * - Right-aligned buttons (standard dialog pattern)
 * - Responsive stacking on small screens
 * - Proper spacing from content above
 * - Visual separator from acceptance section
 * 
 * Requirements: 3.2, 4.3, 6.3
 */
.tos-dialog-actions {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
  flex-wrap: wrap;
  flex-shrink: 0;
  margin-top: 0;
  padding-top: 1.5rem;
}

/* ============================================================================
   Button Styles with Design System Patterns
   ============================================================================ */

/**
 * Base button styles matching design system
 * 
 * Features:
 * - Consistent padding and border radius
 * - Medium font weight and size
 * - Smooth transitions for interactions
 * - Disabled state styling
 * - Fixed dimensions: 120px width, 40px height
 * 
 * Requirements: 4.3, 4.5, 6.3
 */
.tos-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  border-radius: 4px;
  font-size: 14px;
  font-weight: 500;
  width: 120px;
  height: 40px;
  padding: 0.5rem 1rem;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
}

/**
 * Disabled button state
 * 
 * Features:
 * - Reduced opacity (0.5)
 * - Not-allowed cursor
 * - Prevents pointer events
 * - Clear visual feedback for disabled state
 * 
 * Requirements: 4.4, 6.3
 */
.tos-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/**
 * Visible focus indicators for keyboard navigation
 * 
 * Features:
 * - Clear outline with offset
 * - Uses primary color from design system
 * - Meets WCAG accessibility standards
 * 
 * Requirements: 7.5
 */
.tos-button:focus-visible {
  outline: 2px solid hsl(222.2 84% 4.9%);
  outline-offset: 2px;
}

/* ============================================================================
   Exit Button (Secondary Variant)
   ============================================================================ */

/**
 * Secondary button variant for Exit action
 * 
 * Features:
 * - Light background with dark text
 * - Subtle hover state
 * - Matches design system secondary button
 * 
 * Requirements: 6.3
 */
.tos-button-exit {
  background-color: hsl(210 40% 96.1%);
  color: hsl(222.2 47.4% 11.2%);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.tos-button-exit:hover:not(:disabled) {
  background-color: hsl(210 40% 92%);
}

.tos-button-exit:active:not(:disabled) {
  background-color: hsl(210 40% 88%);
  transform: translateY(1px);
}

/* ============================================================================
   Accept Button (Primary Variant)
   ============================================================================ */

/**
 * Primary button variant for OK/Accept action
 * 
 * Features:
 * - Bold primary color background
 * - High contrast white text
 * - Prominent hover and active states
 * - Matches design system primary button
 * 
 * Requirements: 6.3
 */
.tos-button-accept {
  background-color: hsl(222.2 47.4% 11.2%);
  color: hsl(210 40% 98%);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.tos-button-accept:hover:not(:disabled) {
  background-color: hsl(222.2 47.4% 8%);
}

.tos-button-accept:active:not(:disabled) {
  background-color: hsl(222.2 47.4% 6%);
  transform: translateY(1px);
}

/* ============================================================================
   Responsive Design
   ============================================================================ */

/**
 * Mobile-friendly button layout
 * 
 * Features:
 * - Full-width buttons on small screens
 * - Maintains proper spacing
 * - Ensures touch-friendly targets
 * 
 * Requirements: 6.1, 6.3
 */
@media (max-width: 480px) {
  .tos-dialog-actions {
    flex-direction: column-reverse;
  }
  
  .tos-button {
    width: 100%;
    justify-content: center;
  }
}
